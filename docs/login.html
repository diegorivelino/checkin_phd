<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login — Sistema de Eventos</title>
  <style>
    :root{--bg:#0b1220;--card:rgba(255,255,255,.08);--stroke:rgba(255,255,255,.14);--txt:rgba(255,255,255,.92);--mut:rgba(255,255,255,.7);--ok:#38d39f;--err:#ff5a7a;}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;color:var(--txt);background:radial-gradient(900px 520px at 20% 0%, #1a2a57 0%, transparent 60%),linear-gradient(160deg,#0b1220,#0f1b33);min-height:100vh;display:grid;place-items:center;padding:18px}
    .card{width:min(520px,100%);border:1px solid var(--stroke);background:linear-gradient(180deg,var(--card),rgba(255,255,255,.05));border-radius:18px;padding:20px;box-shadow:0 18px 60px rgba(0,0,0,.45)}
    h1{margin:0 0 6px;font-size:28px} p{margin:0 0 14px;color:var(--mut);font-size:14px;line-height:1.5}
    label{display:block;color:var(--mut);font-size:12px;margin:10px 0 6px}
    input{width:100%;padding:12px;border-radius:14px;border:1px solid var(--stroke);background:rgba(0,0,0,.22);color:var(--txt);outline:none}
    button{width:100%;margin-top:14px;padding:12px;border:0;border-radius:14px;font-weight:900;color:#06111f;background:linear-gradient(135deg,#62f0c8,#4aa3ff);cursor:pointer}
    .msg{margin-top:12px;padding:10px;border-radius:14px;border:1px solid var(--stroke);background:rgba(0,0,0,.18);color:var(--mut);font-size:13px}
    .msg.ok{color:var(--ok)} .msg.err{color:var(--err)}
  </style>
</head>
<body>
  <div class="card">
    <h1>Login</h1>
    <p>Acesso ao Admin / Atendimento / Recepção</p>

    <label>Usuário</label>
    <input id="username" placeholder="ex: admin" autocomplete="username"/>

    <label>Senha</label>
    <input id="password" type="password" placeholder="••••••••" autocomplete="current-password"/>

    <button onclick="login()">Entrar</button>
    <div id="msg" class="msg">Informe usuário e senha.</div>
  </div>

<script>
  const WEB_APP_URL = "COLE_AQUI_SUA_URL_DO_WEB_APP";

  function setMsg(t, cls=''){ const el=document.getElementById('msg'); el.className='msg '+cls; el.textContent=t; }

  async function login(){
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;

    if(!username || !password){ setMsg('Preencha usuário e senha.', 'err'); return; }

    setMsg('Entrando...', '');

    const form = new URLSearchParams();
    form.set('action','login');
    form.set('username', username);
    form.set('password', password);

    try{
      const res = await fetch(WEB_APP_URL, { method:'POST', body: form });
      const data = await res.json();
      if(!data.ok){ setMsg('Login inválido.', 'err'); return; }

      localStorage.setItem('auth_token', data.session.token);
      localStorage.setItem('auth_role', data.session.role);
      localStorage.setItem('auth_username', data.session.username);

      setMsg('OK! Redirecionando...', 'ok');
      location.href = 'admin.html';
    }catch(e){
      setMsg('Falha de rede: '+e, 'err');
    }
  }
</script>
</body>
</html>
